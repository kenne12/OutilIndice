<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:jsf="http://xmlns.jcp.org/jsf">

    <ui:composition>

        <p:dialog id="EvaluationCreateDlg" 
                  widgetVar="EvaluationCreateDialog" 
                  modal="true" resizable="false" appendTo="@(body)" 
                  header="#{langue['evaluation.formulaire_creation_personnel']}"
                  closeOnEscape="true"
                  width="85%"
                  height="600">

            <h:form id="EvaluationCreateForm">

                <p:outputLabel style="color: red ; font-size: 17px" id="error_msg" value="#{evaluationPersonnelController.message}" />

                <div class="col-md-12">

                    <h:panelGroup id="display">

                        <div class="row">
                            <div class="form-group col-md-4">
                                <p:outputLabel value="#{langue.personnel}" for="personnel" />
                                <h:selectOneMenu class="form-control" id="personnel"                                        
                                                 value="#{evaluationPersonnelController.personnel.idpersonnel}">
                                    <f:selectItem itemLabel="#{langue['common.choisir']}" itemValue="0" />
                                    <f:selectItems value="#{evaluationPersonnelController.personnels}" var="p" itemLabel="#{p.nom} #{p.prenom}" itemValue="#{p.idpersonnel}" />
                                    <p:ajax update="display,:NotifZone" listener="#{evaluationPersonnelController.updateEvaluationData()}"/>
                                </h:selectOneMenu>                                                
                            </div>

                            <div class="form-group col-md-4">
                                <label>#{langue.periodicite}</label>
                                <h:selectOneMenu id="type_sousperiode" class="form-control" value="#{evaluationPersonnelController.typeSousPeriode.idTypeSousperiode}"                                                 
                                                 required="true" requiredMessage="#{langue['common.valeur_obligatoire']}">
                                    <f:selectItem itemLabel="#{langue['common.choisir']}" itemValue="0" />
                                    <f:selectItems value="#{evaluationPersonnelController.typeSousPeriodes}" var="tsp" itemLabel="#{tsp.nom}" itemValue="#{tsp.idTypeSousperiode}" />
                                    <p:ajax update="sous_periode" listener="#{evaluationPersonnelController.updateSousPeriode('2')}" />
                                </h:selectOneMenu>
                            </div>

                            <div class="form-group col-md-4">
                                <p:outputLabel value="#{langue.periode}" for="sous_periode" />
                                <h:selectOneMenu class="form-control" id="sous_periode"                                        
                                                 value="#{evaluationPersonnelController.sousperiode.idsousperiode}">
                                    <f:selectItem itemLabel="#{langue['common.choisir']}" itemValue="0" />
                                    <f:selectItems value="#{evaluationPersonnelController.sousperiodes}" var="sp" itemLabel="#{sp.nom}" itemValue="#{sp.idsousperiode}" />
                                    <p:ajax update="display,:NotifZone" listener="#{evaluationPersonnelController.updateEvaluationData()}"/>
                                </h:selectOneMenu>                                                
                            </div>
                        </div>

                        <p:separator/>

                        <div class="row" jsf:id="detail_personnel">
                            <div class="form-group col-md-3">
                                <label>#{langue.categorie}</label>
                                <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.personnel.idcategorie.nom}" />
                            </div>

                            <div class="form-group col-md-3">
                                <label>#{langue.service}</label>
                                <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.personnel.idservice.nom}" />
                            </div>

                            <div class="form-group col-md-3">
                                <label>#{langue.responsabilite}</label>
                                <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.personnel.idresponsabilite.nom}" />
                            </div>
                        </div>

                        <div rendered="#{loginController.critere1 eq 'block' ? true : false}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere1_numero} - PRIME DE RESPONSABILITE" style="font-size: 20px;color: red" />
                                </div>

                                <div class="panel-body">
                                    <div class="row" jsf:id="detail_prime_respo" style="display: #{loginController.critere1}">
                                        <div class="form-group col-md-1">
                                            <label>#{langue.point_max}</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.evaluationresponsabilite.pointMax}" />
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>#{langue.score_obtenu} (%)</label>
                                            <h:inputText class="form-control" value="#{evaluationPersonnelController.evaluationresponsabilite.ratio}" >
                                                <p:ajax update="id_point_responsabilite,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.updatePointResponsabilite()}" />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-1">
                                            <label>Point</label>
                                            <h:inputText class="form-control" id="id_point_responsabilite" disabled="true"   value="#{evaluationPersonnelController.evaluationresponsabilite.point}" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere2}" class="row col-md-12">
                            <div class="panel panel-info">
                                <dir class="panel-heading">
                                    <h:outputText value="#{loginController.critere2_numero} - PRIME POUR LES HEURES SUPPLEMENTAIRES" style="font-size: 20px ; color: red" />                     
                                </dir>

                                <div class="panel-body">
                                    <div class="row" jsf:id="prime_hs_detail_j" >
                                        <div class="form-group col-md-2">
                                            <label>Coef de jour</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.evaluationheuresupp.coefjour}" />
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Nombre d'heure</label>
                                            <h:inputText class="form-control" value="#{evaluationPersonnelController.evaluationheuresupp.nbheurejour}" >
                                                <p:ajax update="hsp_jour_tp,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.calculHs('1' , 'jour')}" />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Total point du jour</label>
                                            <h:inputText class="form-control" id="hsp_jour_tp" disabled="true" value="#{evaluationPersonnelController.evaluationheuresupp.pointjour}" />
                                        </div>
                                    </div>

                                    <div class="row" jsf:id="prime_hs_detail_n">
                                        <div class="form-group col-md-2">
                                            <label>Coef de nuit</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.evaluationheuresupp.coefnuit}" />
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Nombre d'heure</label>
                                            <h:inputText class="form-control" value="#{evaluationPersonnelController.evaluationheuresupp.nbheurenuit}" >
                                                <p:ajax update="hsp_nuit_tp,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.calculHs('1' , 'nuit')}" />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Total point de nuit</label>
                                            <h:inputText class="form-control" id="hsp_nuit_tp" disabled="true" value="#{evaluationPersonnelController.evaluationheuresupp.pointnuit}" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere3}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere3_numero} - BONUS POUR NE PAS DETOURNER LES PATIENTS POUR LE PRIVE" style="font-size: 20px ; color: red" />                      
                                </div>

                                <div class="panel-body">
                                    <div class="row" jsf:id="detail_bonus_pp" >
                                        <div class="form-group col-md-1">
                                            <label>#{langue.point_max}</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.evaluationbonuspp.pointMax}" />
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>#{langue.score_obtenu} (%)</label>
                                            <h:inputText class="form-control" value="#{evaluationPersonnelController.evaluationbonuspp.ratio}" >
                                                <p:ajax update="id_point_pratique_p,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.updatePointPratiquePrivee()}" />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-1">
                                            <label>#{langue.points}</label>
                                            <h:inputText class="form-control" id="id_point_pratique_p" disabled="true"  value="#{evaluationPersonnelController.evaluationbonuspp.point}" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere4}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere4_numero} - PRIME DE RESULTAT QUANTITATIF DU DEPARTEMENT" style="font-size: 20px;color: red" />     
                                </div>

                                <div class="panel-body">
                                    <p:dataTable id="datalist_prime_res_qnt_dept" value="#{evaluationPersonnelController.evaluationrqntifdepts}" var="objrqd"                             
                                                 paginator="true"
                                                 editable="true"
                                                 editMode="cell"
                                                 rows="#{evaluationPersonnelController.evaluationrqntifdepts.size()}"
                                                 rowsPerPageTemplate="10,20,30,40,50"
                                                 style="font-size: 14px;width: 70%"
                                                 rowIndexVar="index"
                                                 emptyMessage="#{langue['common.tableau_vide']}">

                                        <p:column class="hardBreak" style="width: 73%;" >
                                            <f:facet name="header">
                                                <h:outputText value="#{langue.indicateur}"/>
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{objrqd.idcible.idindicateur.nom}"/> 
                                        </p:column>

                                        <p:column class="hardBreak" style="width: 10%;text-align: right" >
                                            <f:facet name="header">
                                                <h:outputText value="#{langue.cible_dept}" />
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{objrqd.cible}">
                                                <f:convertNumber />
                                            </h:outputText> 
                                        </p:column>

                                        <p:column style="width: 10%; text-align:right" headerText="#{langue.realisation}">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{objrqd.realisation}" >
                                                        <f:convertNumber />
                                                    </h:outputText>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText required="true" value="#{objrqd.realisation}">                                             
                                                        <p:ajax update="datalist_prime_res_qnt_dept,:EvaluationCreateForm:detail_prime_qnt_dept,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.calculPrimeQtif('1')}" />
                                                    </p:inputText>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column class="hardBreak" style="width: 7%;text-align: right" >
                                            <f:facet name="header">
                                                <h:outputText value="%"/>
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{objrqd.ratio}">
                                                <f:convertNumber pattern="0.00" />
                                            </h:outputText> 
                                        </p:column>

                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column style="text-align:right" footerText="#{langue.totaux}" />                                                                          
                                                <p:column style="text-align:right" footerText="#{evaluationPersonnelController.ciblePrqnt}"/> 
                                                <p:column style="text-align:right" footerText="#{evaluationPersonnelController.realisationPrqnt}"/>
                                                <p:column style="text-align:right" footerText="#{evaluationPersonnelController.ratioPrqnt}"/> 
                                            </p:row>
                                        </p:columnGroup>
                                    </p:dataTable>
                                </div>

                                <div class="panel-footer">
                                    <div class="row form-inline" jsf:id="detail_prime_qnt_dept">
                                        &nbsp;&nbsp;&nbsp;<label>#{langue.point_max}&nbsp;</label>
                                        <h:inputText disabled="true" class="form-control" value="#{evaluationPersonnelController.note.pointMaxRQntif}" />&nbsp;

                                        <label>% Obtenu &nbsp;</label>
                                        <h:inputText disabled="true" class="form-control" value="#{evaluationPersonnelController.note.poucentageRQntif}" >
                                            <f:convertNumber pattern="0.00" />
                                        </h:inputText>&nbsp;

                                        <label>#{langue.score} &nbsp;</label>
                                        <h:inputText disabled="true" class="form-control" value="#{evaluationPersonnelController.note.pointRqntif}" >
                                            <f:convertNumber pattern="0.00" />
                                        </h:inputText>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere5}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere5_numero} - Prime de Résultat Qualitatif du Département" style="font-size: 20px;color: red" />
                                </div>

                                <div class="panel-body">
                                    <div class="row">
                                        <div class="form-group col-md-2">
                                            <label>#{langue.point_max}</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.parametragecriterePrq.point}" >
                                                <f:convertNumber />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>#{langue.score} (%)</label>
                                            <h:inputText disabled="true" class="form-control" value="#{evaluationPersonnelController.evaluationRPrimeQltifDept.pourcentage}" >
                                                <f:convertNumber />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>#{langue.point_obtenu}</label>
                                            <h:inputText disabled="true" class="form-control" value="#{evaluationPersonnelController.evaluationRPrimeQltifPersonnel.point}" >
                                                <f:convertNumber pattern="0.00" />
                                            </h:inputText>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere6}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere6_numero} - Bonus du revenu du Département" style="font-size: 20px;color: red" />                       
                                </div>

                                <div class="panel-body">
                                    <div  class="row">
                                        <div class="form-group col-md-2">
                                            <label>#{langue.point_max}</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.note.pointMaxBrd}" >
                                                <f:convertNumber />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>#{langue.score} (%)</label>
                                            <h:inputText disabled="true" class="form-control"  value="#{evaluationPersonnelController.cibleBrd.ratio}" >
                                                <f:convertNumber pattern="0.00" />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>#{langue.point_obtenu}</label>
                                            <h:inputText disabled="true" class="form-control"  value="#{evaluationPersonnelController.evaluationBonusRDeptPersonnel.point}" >
                                                <f:convertNumber pattern="0.00" />
                                            </h:inputText>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere7}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere7_numero} -  CRITERES DE PERFORMANCE INDIVIDUELLE DU PERSONNEL" style="font-size: 20px ; color: red" />
                                </div>

                                <div class="panel-body">
                                    <p:selectManyCheckbox id="grid_critere" value="#{evaluationPersonnelController.selectedDetailsc}" layout="grid" columns="1" converter="detailScConverter">
                                        <f:selectItems value="#{evaluationPersonnelController.listDetailsc}" var="d" itemLabel="#{d.idsouscritere.nom}" itemValue="#{d}" />
                                        <p:ajax />
                                    </p:selectManyCheckbox>

                                    <p:commandButton                          
                                        value="#{langue['common.ajouter']}"
                                        actionListener="#{evaluationPersonnelController.addCritereToTable()}"
                                        update="datalist_pi,datalist_prime_res_qnt_dept,grid_critere" icon="ui-icon-plus" />

                                    <p:dataTable id="datalist_pi" value="#{evaluationPersonnelController.evaluationpersonnels}" var="item"                             
                                                 paginator="true"
                                                 editable="true"
                                                 editMode="cell"
                                                 rows="#{evaluationPersonnelController.evaluationpersonnels.size()}"
                                                 rowsPerPageTemplate="10,20,30,40,50"
                                                 style="margin-top: 1%;font-size: 15px"
                                                 rowIndexVar="index"
                                                 emptyMessage="#{langue['common.tableau_vide']}">

                                        <p:column class="hardBreak" style="width: 45%;" >
                                            <f:facet name="header">
                                                <h:outputText value="#{langue.sous_critere}"/>
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{item.iddetailsc.idsouscritere.nom}"/> 
                                        </p:column>

                                        <p:column class="hardBreak" style="width: 6%; text-align: center" >
                                            <f:facet name="header">
                                                <h:outputText value="#{langue.point_max}"/>
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{item.iddetailsc.pointMax}">
                                                <f:convertNumber />
                                            </h:outputText> 
                                        </p:column>

                                        <p:column class="hardBreak" style="width: 6%; text-align: center" >
                                            <f:facet name="header">
                                                <h:outputText value="#{langue.note}"/>
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{item.note}">
                                                <f:convertNumber />
                                            </h:outputText>
                                        </p:column>

                                        <p:column style="width: 36%; text-align:left" headerText="#{langue.reponse}">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText class="hardBreak" value="#{item.idelementreponse.nom}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:selectOneMenu value="#{item.idelementreponse}" converter="elementreponseConverter">
                                                        <f:selectItems value="#{item.iddetailsc.idsouscritere.elementreponseCollection}" var="obj" itemLabel="#{obj.nom}" itemValue="#{obj}" />
                                                        <p:ajax update="datalist_pi,:EvaluationCreateForm:detail_pi,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.setResponse(index, evaluationPersonnelController.evaluationpersonnels)}" />
                                                    </p:selectOneMenu>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column style="width: 7%;text-align: center">
                                            <f:facet name="header">
                                                <h:outputText value="Action"/>
                                            </f:facet>
                                            <p:commandButton disabled="true" class="btn btn-sm btn-danger" icon="ui-icon-trash">
                                                <p:ajax update="datalist_pi,:EvaluationCreateForm:grid_critere,:EvaluationCreateForm:detail_pi,,:EvaluationCreateForm:id_total_incitation" event="click" listener="#{evaluationPersonnelController.removeCritere('1', item, evaluationPersonnelController.evaluationpersonnels)}" />
                                            </p:commandButton>                            
                                        </p:column>

                                        <p:columnGroup type="footer">
                                            <p:row>
                                                <p:column style="text-align:right" footerText="#{langue.totaux}" />
                                                <p:column style="text-align:center" footerText="#{evaluationPersonnelController.totalPointPi}" />
                                                <p:column style="text-align:center" footerText="#{evaluationPersonnelController.note.notePi}" />   
                                                <p:column colspan="2" style="text-align:center" footerText=" / " /> 
                                            </p:row>
                                        </p:columnGroup>
                                    </p:dataTable>
                                </div>

                                <div class="panel-footer">
                                    <div class="row form-inline" jsf:id="detail_pi">
                                        &nbsp;&nbsp;&nbsp;<label>#{langue.point_max} : &nbsp;</label>
                                        <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.note.pointMaxPi}" />&nbsp;

                                        <label>#{langue.score_obtenu} (%) : &nbsp;</label>
                                        <h:inputText id="score_pi" class="form-control" value="#{evaluationPersonnelController.note.scorePIndiv}" readonly="true" required="false" />&nbsp;

                                        <label>#{langue.points} : &nbsp;</label>
                                        <h:inputText id="point_pi" class="form-control" value="#{evaluationPersonnelController.note.pointPIndiv}" readonly="true" required="false" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere8}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere8_numero} - CRITERES NEGATIFS D'INCITATION - HEURES PERDUES" style="font-size: 20px ; color: red" />
                                </div>

                                <div class="panel-body">
                                    <div class="row" jsf:id="cni_hp_detail_j">
                                        <div class="form-group col-md-2">
                                            <label>Coef de jour</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.evaluationheuresuppN.coefjour}" />
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Nombre d'heure</label>
                                            <h:inputText class="form-control" value="#{evaluationPersonnelController.evaluationheuresuppN.nbheurejour}" >
                                                <p:ajax update="hsn_jour_tp,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.calculHs('2' , 'jour')}" />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Total point du jour</label>
                                            <h:inputText class="form-control" id="hsn_jour_tp" disabled="true" value="#{evaluationPersonnelController.evaluationheuresuppN.pointjour}" />
                                        </div>
                                    </div>

                                    <div class="row" jsf:id="cni_hp_detail_n">
                                        <div class="form-group col-md-2">
                                            <label>Coef de nuit</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.evaluationheuresuppN.coefnuit}" />
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Nombre d'heure</label>
                                            <h:inputText class="form-control" value="#{evaluationPersonnelController.evaluationheuresuppN.nbheurenuit}" >
                                                <p:ajax update="hsn_nuit_tp,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.calculHs('2' , 'nuit')}" />
                                            </h:inputText>
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Total point de nuit</label>
                                            <h:inputText class="form-control" id="hsn_nuit_tp" disabled="true" value="#{evaluationPersonnelController.evaluationheuresuppN.pointnuit}" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere9}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere9_numero} - PENALITE DE DEPARTEMENT" style="font-size: 20px ; color: red" />                                    
                                </div>

                                <div class="panel-body">
                                    <div class="row" jsf:id="detail_cni_pdept">
                                        <div class="form-group col-md-2">
                                            <label>#{langue.pourcentage} (%)</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.evaluationPenaliteDept.valeur}" />
                                        </div>

                                        <div class="form-group col-md-2">
                                            <label>Point Soustrait</label>
                                            <h:inputText class="form-control" disabled="true" value="#{evaluationPersonnelController.note.pointPenaliteDepartement}" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="display: display: #{loginController.critere10}" class="row col-md-12">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h:outputText value="#{loginController.critere10_numero} - PENALITE INDIVIDUELLE" style="font-size: 20px ; color: red" />
                                </div>

                                <div class="panel-body">
                                    <p:dataTable id="datalist_penalite" value="#{evaluationPersonnelController.lignePenalitePersonnels}" var="item"                             
                                                 paginator="true"
                                                 editable="true"
                                                 editMode="cell"
                                                 rows="15"
                                                 rowsPerPageTemplate="10,20,30,40,50"
                                                 style="margin-top: 1%;font-size: 15px;width: 70%"
                                                 rowIndexVar="index"
                                                 emptyMessage="#{langue['common.tableau_vide']}">

                                        <p:column class="hardBreak" style="width: 73%;" >
                                            <f:facet name="header">
                                                <h:outputText value="#{langue.liste_penalite}"/>
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{item.idPenalite.nom}"/> 
                                        </p:column>

                                        <p:column class="hardBreak" style="width: 10%;text-align:center" >
                                            <f:facet name="header">
                                                <h:outputText value=" % "/>
                                            </f:facet>
                                            <h:outputText class="hardBreak" value="#{item.valeur}"/> 
                                        </p:column>

                                        <p:column class="hardBreak" style="width: 7%;text-align: center" >
                                            <f:facet name="header">
                                                <h:outputText value="Etat"/>
                                            </f:facet>
                                            <h:selectBooleanCheckbox value="#{item.etat}">
                                                <p:ajax update="datalist_penalite,:EvaluationCreateForm:detail_cni_pi,:EvaluationCreateForm:id_total_incitation" listener="#{evaluationPersonnelController.updateValue(index , item)}" />
                                            </h:selectBooleanCheckbox>
                                        </p:column>

                                        <p:column style="width: 10%;text-align: center" >
                                            <f:facet name="header">
                                                <h:outputText value="#{langue['common.action']}"/>
                                            </f:facet>
                                            <p:commandButton icon="ui-icon-trash">
                                                <p:ajax update="datalist_penalite,:EvaluationCreateForm:detail_cni_pi,:EvaluationCreateForm:id_total_incitation" event="click" listener="#{evaluationPersonnelController.removeLignePenalite(item)}" />
                                            </p:commandButton>
                                        </p:column>

                                    </p:dataTable>
                                </div>

                                <div class="panel-footer">
                                    <div jsf:id="detail_cni_pi" class="row form-inline">
                                        &nbsp;&nbsp;&nbsp;<label>#{langue.pourcentage} (%) : &nbsp;</label>
                                        <h:inputText class="form-control" disabled="true" id="id_percentage_cni_pi" value="#{evaluationPersonnelController.evaluationPenalitePersonnel.score}" />

                                        <label>&nbsp;Point Soustrait : &nbsp;</label>
                                        <h:inputText class="form-control" id="id_ptsoustrait_cni_pi" disabled="true" value="#{evaluationPersonnelController.note.pointPenalitePersonnel}" />
                                    </div>
                                </div>
                            </div>
                        </div>

                        <p:separator style="width: 100%;margin-left: 0%" />

                        <div class="row col-md-12 form-inline" jsf:id="id_total_incitation">
                            <label> Total Incitation Positif : &nbsp; </label>
                            <h:inputText class="form-control" value="#{evaluationPersonnelController.note.incitationPositif}" readonly="true" disabled="true" />
                            <label> Total Incitation Négatif : &nbsp; </label>
                            <h:inputText class="form-control" value="#{evaluationPersonnelController.note.incitationNegatif}" readonly="true" disabled="true" />&nbsp;
                            <p:commandButton icon="ui-icon-refresh" update=":EvaluationCreateForm:detail_cni_pi,:EvaluationCreateForm:detail_cni_pdept,id_total_incitation" value="#{langue.actualiser}" onclick="#{evaluationPersonnelController.calculFinal()}" />
                        </div>
                        <br/>
                        <p:separator style="width: 100%;margin-left: 0%" />

                        <center>
                            <p:commandButton value="#{langue['common.fermer']}" 
                                             onclick="PF('EvaluationCreateDialog').hide()"
                                             icon="ui-icon-close"/>

                            <p:commandButton icon="ui-icon-save" actionListener="#{evaluationPersonnelController.save()}"
                                             value="#{langue['common.enregistrer']}"
                                             onclick="PF('AjaxNotifyDialog').show()"
                                             update="display,:EvaluationListerForm:growl,error_msg,:notify1">
                                <p:confirm header="#{langue['notification.confirmation']}" 
                                           message="#{langue['notification.confirmation_enregistrement']}" 
                                           icon="ui-icon-alert"/>
                            </p:commandButton>
                        </center>
                    </h:panelGroup>
                </div>
            </h:form>
        </p:dialog>
    </ui:composition>
</html>
